<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Machines_model extends CI_Model
{
	protected $table='machines';

	public function insertion_machines($nom,$type,$ville)
	{// insertion des donnÃ©es dans la bdd
		
		return $this->db->set('nom_dns', $nom)
			->set('type',$type)
			->set('ville',$ville)
			->insert($this->table);
	}
	public function listing_machines()
	{
		$resultat =$this->db->select('*')
							->from($this->table)
							->get()
							->result();
		return $resultat;
	}
	public function detail_machines($id)
	{
		$resultat=$this->db->select('*')
							->from($this->table)
							->where('id_machines',$id)
							->get()
							->result();
		return $resultat;
	}
	public function maj_machines($id,$nom,$type,$ville)
	{
		$resultat= $this->db->set('nom_dns', $nom)
					->set('type',$type)
					->set('ville',$ville)
					->where('id_machines',$id)
					->update($this->table);
		return $resultat;
	}
	public function suppression_machines($id)
	{
		return $this->db ->where('id_machines',$id)
						-> delete($this->table);
	}
	public function afficher_liste_nom_machine()
	{
		$resultat=$this->db->select('id_machines,nom_dns')
							->from($this->table)
							->get()
							->result();
		return $resultat;
	}
	public function infos_machines($id)
	{
		$resultat=$this->db->select('*')
							->from($this->table)
							->join('option21','machines.id_machines=option21.id_machines')
							->where('machines.id_machines',$id)
							->order_by('date_fin','DESC')
							->get()
							->result();
		return $resultat;
	}
}